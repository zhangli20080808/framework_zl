<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div id="itemInfo">
    <div id="name">
        <h1 id='pname'>乐视TV（ Letv） S50 Air 全配版 50英寸2D智能LED液晶 超级电视</h1>
        <div id="pdes">各地区货源已陆续到库，我们将在十月十号左右发货，对于此次延迟发货给您带来的不便表示致歉，望您谅解。</div>
        <div id="p-ad-phone"></div>
        <div>价格：<strong id='pprice'>6000</strong></div>
    </div>
</div>
<button id='btn'>加入购物车</button>


<!--购物车：-->

<!--产品列表 -->
<!--产品的总价格-->
<div>购物车价格：<strong id='sum'>0</strong></div>

</body>
</html>

<script>
    window.onload=function() {
        var btn=document.getElementById('btn')
        var name= document.getElementById('pname')
        var price= document.getElementById('pprice')
        var sum= document.getElementById('sum')
        var des= document.getElementById('pdes')

       /* ------------------------------------------------------------
                                    产品工厂
        ------------------------------------------------------------*/

         /*第一步：创建工厂*/
        /*改造成工厂模式 -- 产品对象*/
        function createProduct(data){
            var obj = new Object();
            obj.name=data.name;
            obj.description = data.des;
            obj.youPrice=data*0.9;
            obj.price = data.price;
            obj.colors=['red','blue']
            obj.sizes=[24,23,26]
            obj.closeSizes=['x','xl','xm','xxxl']

            return obj;

            function getPrice(type){

            }
        }


        /*第二步：食品加工*/
        /*原料*/
        var source = {name:'xxx',price:1000,des:'XXXXXX'}
        /*使用工厂加工原料*/
        var p = createProduct(source)

        /*第三步：使用加工出来的实例*/
        name.innerHTML=p.name
        price.innerHTML=p.price
        des.innerHTML=p.description


        /* ------------------------------------------------------------
                                    购物车工厂
         ------------------------------------------------------------*/

        /*第一步：创建工厂*/
        /*定义一个购物车工厂*/
        //定义一个购物车json对象
        function createCart(data){
            //1.原料
            var obj = new Object();
            //2.加工
            obj.sumprice = getPrice(data);
            obj.sum = data.length;
            //3.出场
            return obj;

            function getPrice(list){
                var sum=0;
              for(var i=0;i<list.length;i++){
                  sum+=list[i].price;
              }
                return sum;
            }
        }


        /*第二步：食品加工*/
        /*原料：一般来自后台：后台会通过ajax返回给你  是一个json字符串
         将这个字符串转化成json对象*/
        var products = [{name:'1',price:100},{name:'1',price:300},{name:'1',price:500}]
        /*将原料放入工厂加工*/
        var cart =createCart(products)


       /*第三步：使用加工好的饼干*/
        sum.innerHTML=cart.sum;
        console.log(cart.sumprice)
        btn.onclick = function(){
            iphone.addToCart(iphone)
        }


        /*思考场景：一个是写这个工厂的，一个是使用工厂的*/
    }





</script>