<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!--
和map类似，Array的filter也接收一个函数。但是和map不同的是， filter把传入的函数依次
作用于每个元素，然后根据返回值是 true 还是false决定保留还是丢弃该元素。

-->
</body>
<script>
    /*在一个Array中，删掉偶数，只保留奇数，可以这么写*/
    var arr = [1, 2, 4, 5, 6, 9, 10, 15];
    var r = arr.filter(function (x) {
        return x % 2 !== 0;
    });
    //    console.log(r)   // [1, 5, 9, 15]

    /*把一个Array中的空字符串删掉，可以这么*/

    var arr = ['A', '', 'B', null, undefined, 'C', ' '];
    var r = arr.filter(function (s) {
        return s && s.trim(); // 注：IE9(不包含IE9)以下的版本没有trim()方法
    });
    //    console.log(r)
    // ['A', 'B', 'C']

    /*filter 接收的回调函数，其实可以有多个参数。通常我们仅使用第一个参数，表示Array的某个
     元素。回调函数还可以接收另外两个参数，表示元素的位置和数组本身：*/

    var arr = ['A','B','C']
    var r = arr.filter(function (element,index,self) {
        console.log(element)
        console.log(index)
        console.log(self)
        return true
    })
    /*利用 filter ，可以巧妙地去除Array的重复元素：
     */

    var r, arr = ['apple', 'strawberry', 'banana', 'pear', 'apple', 'orange', 'orange', 'strawberry'];

    r= arr.filter(function (element,index,self) {
        return self.indexOf(element) === index;
    })
    console.log(r)

    //    去除重复元素依靠的是 indexOf 总是返回第一个元素的位置，后续的重复元素位置与 indexOf 返回的位置不相
    // 等，因此被 filter 滤掉了。


    var arr = ['abc','abcd','sss','2','d','t','2','ss','f','22','d'];
    //定义一个新的数组
    var s = [];
    //遍历数组
    for(var i = 0;i<arr.length;i++){
        if(s.indexOf(arr[i]) == -1){  //判断在s数组中是否存在，不存在则push到s数组中
            s.push(arr[i]);
        }
    }
    console.log(s);


    /*
     思路：每次取出原数组的元素，然后再对象中访问这个属性，如果存在就说明重复
     */

    function unique(arr){

        var res =[];

        var json = {};

        for(var i=0;i<arr.length;i++){

            if(!json[arr[i]]){

                res.push(arr[i]);

                json[arr[i]] = 1;

            }

        }

        return res;

    }

/*
    思路：定义一个新数组，并存放原数组的第一个元素，然后将元素组一一和新数组的元素对比，若不同则存放在新数组中。
*/

    function unique(arr){

        var res = [arr[0]];

        for(var i=1;i<arr.length;i++){

            var repeat = false;

            for(var j=0;j<res.length;j++){

                if(arr[i] == res[j]){

                    repeat = true;

                    break;

                }

            }

            if(!repeat){

                res.push(arr[i]);

            }

        }

        return res;

    }
</script>
</html>
